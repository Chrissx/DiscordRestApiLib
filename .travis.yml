language: csharp
sudo: required
dist: trusty
addons:
  sonarqube: true
  apt:
    packages:
    - gettext
    - libcurl4-openssl-dev
    - libicu-dev
    - libssl-dev
    - libunwind8
    - zlib1g
env:
  global:
    - secure: "Py/DQxmVb73ybdZ8Ichjk6NUBfLepEw9EFE9b/raMieyMpHbLNxa5OD+2oLcJKvrbQgSnfA0wBQrER/BTwwj4bIXyYA3iwgtgt5LI/mnRjsB7N6IoX0I9kIfMCi7NlPdBX9ooa4S3Q4G8GOvPmE5J7lS5fRRnt3S6GfFKbNCVXsReX1Cj2xNQVylQehnfuI4xvEEVzzaL//54tCEmCSKg9AKmGjLkYHtnGxLaXD6V9usWd3NsmxNF+FmRX2Tyl1DL7pTiqoI2LcEyuZYavOlLhyHyVo9FlPBzWpSgu1WRYzn/0oOhJxLnKVWl0iuGZwBdUJJiMRocu7NRrj+01agEGJcxamUGa20LEhfW8pJsxDQGun0YrB1pz1pCzHMm1U5KK0lcYk75F54+24hA/3kTBaOig9fiiDzOCvO7j6cECr96KzVsha2wBs8rjvDV+v0WH6xxbhvUWwf5WmGrPMfUlAI9yCjoJLmOGG1WYTcCGg7QHF9v9iiRkYxtGvPo/CmaTNiO6Q7HLH4zXAwiI10mbT8xL6y73vd2RTFs4/XueM/4mNUtivzqkCF8TVlkqpyW3KyWtN1rvsID2++2Qr8HLIEg8XXPNEgvU4zTBWbSAozxEzpBlmVHb4q1Y/dlq0/hVOLrw/BelklmY2Br3IlZdJP00pnL6R+zGn6tLCNv44="
    - DOTNET_SKIP_FIRST_TIME_EXPERIENCE: true
    - DOTNET_CLI_TELEMETRY_OPTOUT: 1
mono:
  - 4.0.5
os:
  - linux
  - osx
osx_image: xcode7.1
branches:
  only:
    - master
    - release
    - dev
    - /^(.*\/)?ci-.*$/
before_install:
  - if test "$TRAVIS_OS_NAME" == "osx"; then brew update; brew install openssl; ln -s /usr/local/opt/openssl/lib/libcrypto.1.0.0.dylib /usr/local/lib/; ln -s /usr/local/opt/openssl/lib/libssl.1.0.0.dylib /usr/local/lib/; fi
  - chmod +x build.sh
script:
  - ./build.sh --quiet verify
  # other script steps might be done before running the actual SonarQube analysis
  - sonar-scanner -Dsonar.login=$SONAR_TOKEN
